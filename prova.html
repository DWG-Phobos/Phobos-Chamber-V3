<html>
	<head>
		<title>Phobos: Answer or Die</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src='js/OrbitControls.js'></script>
		<script src='js/ColladaLoader.js'></script>
		<script>
			var scene = new THREE.Scene(); // Escena
			var camera = new THREE.PerspectiveCamera(100, window.innerWidth/window.innerHeight, 0.1, 1000 );

			/*
				var VIEW_ANGLE = 45;
		        var ASPECT = VIEW_WIDTH / VIEW_HEIGHT;
		        var NEAR = 0.1;
		        var FAR = 20000;

		        this.camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);
			*/

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );	// Tamany de la pantalla de renderitzat
			document.body.appendChild( renderer.domElement );	// Coloquem el render al document web
			

			//Controls
			var controls	= new THREE.OrbitControls(camera)



			//Charge Model
			var loadingManager = new THREE.LoadingManager( function() {

			scene.add( player );

			} );
			
			var loader = new THREE.ColladaLoader( loadingManager );
			loader.options.convertUpAxis = true;
			loader.load( 'models/trooper/stormtrooper.dae', function ( collada ) {
			
				player = collada.scene;
				player.rotation.x = 0;
				player.scale.set(0.5,0.5,0.5);
			} );
			
			var ambientLight = new THREE.AmbientLight( 0xcccccc, 0.4 );
			scene.add( ambientLight );




			
			
			
			
			mesh = new THREE.Object3D();
			
			/*
			wallsGeometry = [
			        new THREE.PlaneGeometry(5, 1),
                    new THREE.PlaneGeometry(10, 5),
                    new THREE.PlaneGeometry(15, 10),
                    new THREE.PlaneGeometry(20, 15)
                ];
			walls = [];
	        for (i = 0; i < walls.length; i += 1) {
	            walls.push(new THREE.Mesh(wallsGeometry[i], material));
	            walls[i].position.y = i;
	            walls[i].rotation.x = 10;
	            mesh.add(walls[i]);
	        }
			*/


	        camera.position.z = 5;

			
			//Creating Obstacles

				//Creating Cubes
				var largeCubeGeometry = new THREE.BoxGeometry( 1, 3, 1 ); //Crear Geometria
				var cubeGeometry = new THREE.BoxGeometry( 1, 1, 1 ); //Crear Geometria
				var tallCubeGeometry = new THREE.BoxGeometry( 1, 1, 3 ); //Crear Geometria

				var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } ); //Crear color
				var largeCube = new THREE.Mesh( largeCubeGeometry, material ); //Crear objecte
				var cube = new THREE.Mesh( cubeGeometry, material ); //Crear objecte
				var tallCube = new THREE.Mesh( tallCubeGeometry, material ); //Crear objecte
				//var giantCube = new THREE.Mesh( giantGeometry, material ); //Crear objecte

				//Cubes values
				cube.position.set(0, 5, 0.5);
				tallCube.position.set(0, 2, 1.5);
				largeCube.position.set(0, 10, 0.5);
				//giantCube.position.set(2.5, 0, 5);
				
				//Adding Cubes to the Mesh
				mesh.add(cube);
				mesh.add(largeCube);
				mesh.add(tallCube);
				//mesh.add(giantCube);

				//Creating Triangles
				var geometry = new THREE.Geometry();

			    geometry.vertices = [
			        new THREE.Vector3( 0, 0, 0 ),
			        new THREE.Vector3( 5, 0, 0 ),
			        new THREE.Vector3( 0, 5, 0 ),
			        new THREE.Vector3( 5, 5, 0 ),
			        new THREE.Vector3( 0, 5, 5 ),
			        new THREE.Vector3( 5, 5, 5 )
			      
			    ];
			    
			    geometry.faces = [
			        new THREE.Face3( 2, 1, 0),
			        new THREE.Face3( 1, 2, 3),
			        new THREE.Face3( 4, 2, 0),
			        new THREE.Face3( 1, 3, 5),
			        new THREE.Face3( 0, 1, 4 ),
			        new THREE.Face3( 5, 4, 1),
			        new THREE.Face3( 2, 4, 5,),
			        new THREE.Face3( 5, 3, 2,)
			    ];
				
			    var triangle = new THREE.Mesh( geometry, material );
			    mesh.add(triangle);

			//Creating World	

				//Creating the ground
				var groundGeometry = new THREE.PlaneGeometry(20, 100);
				var material1 = new THREE.MeshBasicMaterial( { color: "red" } ); //Crear color
				var ground = new THREE.Mesh(groundGeometry, material1);

				//Creating the walls
				var wallGeometry = new THREE.PlaneGeometry(10, 100);
				var wallMaterial = new THREE.MeshBasicMaterial( { color: "blue" } ); //Crear color
				var rightWall = new THREE.Mesh(wallGeometry, wallMaterial);
				var leftWall = new THREE.Mesh(wallGeometry, wallMaterial);

				//Ground values
				ground.position.y = 30;

				//Right Wall Values
				rightWall.position.x = 10;
				rightWall.position.y = 30;
				rightWall.position.z = 5;
				
				rightWall.rotation.y = -Math.PI / 2;

				//Left Wall Values

				leftWall.position.x = -10;
				leftWall.position.y = 30;
				leftWall.position.z = 5;

				leftWall.rotation.y = Math.PI / 2;

				//Adding Walls and Ground to the Mesh
				mesh.add(ground);
				mesh.add(leftWall);
				mesh.add(rightWall);

			

			//Adding all objects to the Scene
			scene.add(mesh);


			//Function that renders the scene
			var animate = function () {

				requestAnimationFrame( animate );
				renderer.render(scene, camera);
			};
			
			animate();

		</script>
	</body>
</html>
